--- 
- name: Install latest packes
  apt:
    update_cache: yes
    autoremove: yes
    state: present
    pkg:
      - vim
      - python3

- name: Install GPIO
  apt:
    state: present
    pkg:
      - rpi.gpio

- name: Enable Remote GPIO
    shell: "raspi-config nonint do_rgpio 0"
    when: raspiconfig.RGPIO 

# Todo: Add global variables
- name: Set a hostname
  ansible.builtin.hostname:
    name: "{{ hostname }}"

- name: Set keyboard locale
  ansible.builtin.command: "raspi-config nonint do_change_locale {{ keyboard.locale }} 2> /dev/null"

- name: Set keyboard locale
  ansible.builtin.command: "raspi-config nonint do_configure_keyboard {{ keyboard.language }} 2> /dev/null"

